<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/bootstarp/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
        integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
        crossorigin="anonymous" />
    <title>Dashboard</title>
</head>

<style>
    .container-fluid {
        padding: 0;
    }

    .row {
        margin: 0;
    }

    .main {
        margin-top: 20px;
    }

    .sidebar {
        background: #14213d;
        height: 100vh;
        position: fixed;
        left: 0;
        top: 0;
        width: 300px;
        z-index: 1;
        transition: all 0.3s ease;
    }

    .sidebar.active {
        margin-left: -300px;
    }

    .sidebar .logo {
        padding: 20px;
        background: #14213d;
        border-bottom: 1px solid #eee;
    }

    .sidebar .logo img {
        width: 100%;
    }

    .sidebar .sidebar-menu {
        padding: 20px 0;
    }

    .sidebar .sidebar-menu ul li {
        list-style: none;
        margin-bottom: 15px;
    }

    .sidebar .sidebar-menu ul li a {
        display: flex;
        align-items: center;
        text-decoration: none;
        color: #fff;
        transition: all 0.3s ease;
    }

    .sidebar .sidebar-menu ul li a:hover {
        color: #007bff;
    }

    .sidebar .sidebar-menu ul li a .icon {
        width: 40px;
        text-align: center;
    }

    .sidebar .sidebar-menu ul li a .icon i {
        font-size: 18px;
    }

    .sidebar .sidebar-menu ul li a .title {
        font-size: 20px;
        font-weight: 500;
    }

    .card-title {
        font-size: 20px;
    }

    .main-content {
        transition: all 0.3s ease;
        margin-left: -98px;
    }


    .main-content .header {
        background: #14213d;
        padding: 32px;
        border-bottom: 1px solid #eee;
        color: #fff;
    }

    .main-content .header .header-menu {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .main-content .header .header-menu .title {
        font-size: 18px;
        font-weight: 500;
    }

    .fa,
    .far,
    .fas {
        color: #fca61f;
    }
</style>




<body>

    <!-- Create simple responsive Dashboard with right sidebar-->
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 col-sm-12 col-xs-12">
                <div class="sidebar">
                    <div class="logo">
                        <a href="index.html">
                            <img src="assets/image/logo-img.png" style="width: 200px;" alt="logo">
                        </a>
                    </div>
                    <div class="sidebar-menu">
                        <ul>
                            <li>
                                <a href="dashboard.html">
                                    <span class="icon"><i class="fas fa-tachometer-alt"></i></span>
                                    <span class="title">Dashboard</span>
                                </a>
                            </li>

                            <li>
                                <a href="blog.html">
                                    <span class="icon"><i class="fas fa-blog"></i></span>
                                    <span class="title">Blogs</span>
                                </a>
                            </li>

                            <li>
                                <a href="message.html">
                                    <span class="icon"><i class="fas fa-envelope"></i></span>
                                    <span class="title text-warning">Messages</span>
                                </a>
                            </li>
                            <li>
                                <a href="index.html">
                                    <span class="icon"><i class="fas fa-sign-out-alt"></i></span>
                                    <span class="title">Logout</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-9 col-sm-12 col-xs-12">
                <div class="main-content">
                    <div class="header">
                        <div class="header-menu">
                            <div class="title">Messages</div>
                            <div class="sidebar-btn">
                                <i class="fas fa-bars"></i>
                            </div>
                        </div>
                    </div>
                    <div class="main">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h3 class="card-title">List of Messages</h3>
                                            <div class="card-tools">
                                                <div class="input-group input-group-sm" style="width: 200px;">
                                                    <input type="text" name="table_search" id="table_search"
                                                        class="form-control float-right" placeholder="Search">

                                                    <div class="input-group-append">
                                                        <button type="submit" class="btn btn-default" id="table_search_submit"><i
                                                                class="fas fa-search"></i></button>
                                                    </div>

                                                </div>
                                            </div>

                                        </div>




                                        <div class="card-body table-responsive p-0">
                                            <table class="table table-hover text-nowrap">
                                                <thead>
                                                    <tr>
                                                        <th>ID</th>
                                                        <th>Name</th>
                                                        <th>Email</th>
                                                        <th>Phone</th>
                                                        <th>Subject</th>
                                                        <th>Message</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="MessageList">

                                                </tbody>
                                            </table>
                                        </div>




                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <script src="assets/js/jquery-3.6.0.min.js"> </script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js" async></script>
    <script src="assets/js/popper.min.js"> </script>
    <script src="assets/js/bootstrap.min.js"> </script>
    <script src="assets/js/custom-script.js"> </script>
    <script src="assets/js/contact-form.js"></script>

    <!-- Delete confirmation modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-warning" id="exampleModalLabel">Delete Confirmation</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body text-white">
                    Are you sure you want to delete this message?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" id="cancelDelete">Cancel</button>
                    <button type="button" class="btn btn-danger" id="deleteMessage">Delete</button>
                </div>
            </div>
        </div>
    </div>




    <script>

        

        // showMessageList(); to show all message list from local storage

        function showMessageList() {
            let messageList = JSON.parse(localStorage.getItem("messagesList"));
            let html = "";
            if (messageList) {
                messageList.forEach((message, index) => {
                    html += `<tr>
                    <td>${index + 1}</td>
                    <td>${message.name}</td>
                    <td>${message.email}</td>
                    <td>${message.phone}</td>
                    <td>${message.subject}</td>
                    <td>${message.comments}</td>
                    <td>
                        <a href="#" class="btn btn-danger btn-sm" onclick="deleteMessage(${index.id})">
                            <i class="fas fa-trash"></i>
                        </a>
                        <a href="mailto:${message.email}" class="btn btn-primary btn-sm">
                            <i class="fas fa-reply"></i>
                        </a>
                    </td>
                </tr>`;
                });
            }
            $("#MessageList").html(html);
        }
        showMessageList()

        // Search Functionality name, email, phone, subject, comments
        $("#table_search").keyup(function () {
            let search = $(this).val();
            let messageList = JSON.parse(localStorage.getItem("messagesList"));
            let html = "";
            if (messageList) {
                messageList.forEach((message, index) => {
                    if (message.name.toLowerCase().includes(search.toLowerCase()) || message.email.toLowerCase().includes(search.toLowerCase()) || message.phone.toLowerCase().includes(search.toLowerCase()) || message.subject.toLowerCase().includes(search.toLowerCase()) || message.comments.toLowerCase().includes(search.toLowerCase())) {
                        html += `<tr>
                        <td>${index + 1}</td>
                        <td>${message.name}</td>
                        <td>${message.email}</td>
                        <td>${message.phone}</td>
                        <td>${message.subject}</td>
                        <td>${message.comments}</td>
                        <td>
                            <a href="#" class="btn btn-danger btn-sm" onclick="deleteMessage(${index})">
                                <i class="fas fa-trash"></i>
                            </a>
                            <a href="mailto:${message.email}" class="btn btn-primary btn-sm">
                                <i class="fas fa-reply"></i>
                            </a>
                        </td>
                    </tr>`;
                    }
                });
            }
            $("#MessageList").html(html);
        });

        // Delete by id Functionality after modal confirmation 
        function deleteMessage(id) {
            $("#deleteModal").modal("show");
            $("#deleteMessage").click(function () {
                let messageList = JSON.parse(localStorage.getItem("messagesList"));
                messageList.splice(id, 1);
                localStorage.setItem("messagesList", JSON.stringify(messageList));
                showMessageList();
                $("#deleteModal").modal("hide");
            });
            // Cancel delete
            $("#cancelDelete").click(function () {
                window.location.reload();
            });

        }


    </script>
</body>
</html>